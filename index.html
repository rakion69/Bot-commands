<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="common.css">
  <link id="themeStylesheet" rel="stylesheet" href="style.css">
  <link rel="icon" href="img/icon.ico" type="image/x-icon">
  <title>Comandi Bot</title>
  <style>
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 20px;
  }
  #botStatus {
    font-weight: bold;
  }
  </style>
</head>
<body>
    <header>
      <select id="themeSelector">
      <option value="style.css">Default 🌈</option>
      <option value="theme-dark.css">Dark Mode 🌙</option>
      <option value="theme-amoled.css">AMOLED Dark 🖤</option>
      <option value="theme-hotel.css">Hazbin Hotel 😈</option>
      <option value="theme-germano.css">Ochetta Tolosa 🪶</option>
      <option value="theme-tolosa.css">Germano Reale 🦆</option>

      </select>
      <div id="botStatus" class="status-indicator">Controllo stato...</div>
    </header>

  <h1>Comandi del Bot</h1>
  <div class="cards-container"></div>
  
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const selector = document.getElementById('themeSelector');
      const stylesheet = document.getElementById('themeStylesheet');

      const savedTheme = localStorage.getItem('selectedTheme');
      if (savedTheme) {
        stylesheet.setAttribute('href', savedTheme);
        selector.value = savedTheme;
      }

      selector.addEventListener('change', function () {
        const selected = this.value;
        stylesheet.setAttribute('href', selected);
        localStorage.setItem('selectedTheme', selected);
      });
    });
  </script>
  
  <script>
    fetch('comandi.json')
      .then(response => response.json())
      .then(data => {
        const container = document.querySelector('.cards-container');
        data.forEach(cmd => {
          const card = document.createElement('div');
          card.className = 'card';
      // Se c'è un'immagine, aggiungila
          if (cmd.img) {
            const img = document.createElement('img');
            img.src = cmd.img;
            img.className = 'icon'; // se vuoi usare lo stile CSS che abbiamo fatto
            card.appendChild(img);
          }
          const title = document.createElement('h2');
          title.textContent = cmd.nome;
          card.appendChild(title);

          const desc = document.createElement('p');
          desc.textContent = cmd.descrizione;
          card.appendChild(desc);

          if (cmd.personaggi && cmd.personaggi.length > 0) {
            const strong = document.createElement('strong');
            strong.textContent = 'Personaggi:';
            card.appendChild(strong);

            const ul = document.createElement('ul');
            cmd.personaggi.forEach(p => {
              const li = document.createElement('li');
              li.textContent = p;
              ul.appendChild(li);
            });
            card.appendChild(ul);
          }

          container.appendChild(card);
        });
      })
      .catch(err => {
        document.getElementById('container').textContent = 'Errore nel caricamento dei comandi.';
        console.error(err);
      });
  </script>

  <script>
  const selector = document.getElementById('themeSelector');
  const stylesheet = document.getElementById('themeStylesheet');

  selector.addEventListener('change', function () {
    stylesheet.setAttribute('href', this.value);
  });

  // Imposta il tema iniziale
  document.body.classList.add('style');
</script>

<script>
  const apiKey = 'ur2877652-6bf7c45c6cb156f063e84dcf'; // Inserisci qui la tua API Key

  fetch('https://api.uptimerobot.com/v2/getMonitors', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ api_key: apiKey, format: 'json' })
  })
  .then(response => response.json())
  .then(data => {
    const monitor = data.monitors[0]; // Se hai più monitor, filtra per nome o ID
    const statusDiv = document.getElementById('botStatus');

    if (monitor.status === 2) {
      statusDiv.textContent = 'Bot ONLINE ✅';
      statusDiv.classList.add('online');
    } else {
      statusDiv.textContent = 'Bot OFFLINE ❌';
      statusDiv.classList.add('offline');
    }
  })
  .catch(error => {
    console.error('Errore nel recupero dello stato:', error);
    const statusDiv = document.getElementById('botStatus');
    statusDiv.textContent = 'Errore nel controllo';
  });
</script>



</body>
</html>
